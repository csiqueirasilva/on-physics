<html>
	<head>
		<title>Framework with Kepler Parameters example</title>
		
		<script src="../core/PhysElement.js"></script>
		<script src="../core/PhysFramework.js"></script>
		
		<script src="../js/jquery.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>

        <script src="../js/three.min.js"></script>
		<script src="../js/stats.min.js"></script>
		<script src="../js/OrbitControls.js"></script>

		<script src="../lib/on-daed-js/geral.js"></script>
        <script src="../lib/on-daed-js/vsop87.min.js"></script>
        <script src="../lib/on-daed-js/astro.js"></script>
 
        <script src="../lib/on-daed-js/ThreeHelper.js"></script>
        <script src="../lib/on-daed-js/MathHelper.js"></script>
        <script src="../lib/on-daed-js/3D.js"></script>
		
        <link href="../css/bootstrap.min.css" rel="stylesheet"/>
        <link href="../css/bootstrap-responsive.css" rel="stylesheet"/>
		
		<style>
			#info-box {
				position: absolute;
				left: 1%;
				bottom: 1%;
				width: 200px;
				height: 200px;
				background: #ffffff;
				padding: 5px;
			}
			
			#pausar-tempo:hover {
				cursor: pointer;
			}
			
			#pausar-tempo {
				font-weight: bold;
				font-color: #0000FF;
			}
		</style>
		
	</head>
	<body>
	
		<div id="info-box">
			<div id="info-distancia"></div>
			<div id="info-tempo"></div>
			
			<div id="pausar-tempo">Stop time</div>
		</div>
	
		<script>
            
			var physFramework = new PhysFramework(
				'../imgs/particleTexture.png',
				1,
				{x: 0, y: 0, z: -4}
			);

			physFramework.addDebugAxisMarkers(1);
			
			var radius = 2.5;
			var r = 9;
			var speed = 200;
			
			// EARTH
			var earth = physFramework.addObjectFromKepler(
				0.000003003,
				0.01,
				0x0077FF,
				1.00000011,
				0.01671022,
				0.00005,
				102.94719 + 11.26064,
				-11.26064,
				100.46435 - 102.94719
			);
			
			earth.physElement.exportPosition(earth.position);
			
			// reference axis to spawn position
			var debugAxisMarkers = new THREE.Object3D();
		
			var geo = new THREE.SphereGeometry(0.01, 64, 32);
			var mat = new THREE.MeshBasicMaterial({color: 0xFFFF00});
			
			var sDebugPosY = new THREE.Mesh(geo, mat);
			sDebugPosY.position.copy(earth.position);
			debugAxisMarkers.add(sDebugPosY);

			var sDebugNegY = new THREE.Mesh(geo, mat);
			sDebugNegY.position.y = -sDebugPosY.position.y;
			sDebugNegY.position.x = -sDebugPosY.position.x;
			debugAxisMarkers.add(sDebugNegY);
			
			var sDebugPosX = new THREE.Mesh(geo, mat);
			sDebugPosX.position.y = -sDebugPosY.position.x;
			sDebugPosX.position.x = sDebugPosY.position.y;
			debugAxisMarkers.add(sDebugPosX);
			
			var sDebugNegX = new THREE.Mesh(geo, mat);
			sDebugNegX.position.y = sDebugPosY.position.x;
			sDebugNegX.position.x = -sDebugPosY.position.y;
			debugAxisMarkers.add(sDebugNegX);
			
			physFramework.mainScene.add(debugAxisMarkers);
			
			window.setInterval(function() {
				
				var e = document.getElementById('info-distancia');
				e.innerHTML = "d = " + (earth.position.length() * 149597870).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " km";
				
				e = document.getElementById('info-tempo');
				e.innerHTML = "t = " + physFramework._accTime.toFixed(2) + " dias / " + (physFramework._accTime / 365.25).toFixed(2) + " anos";
				
			}, 20);
			
			document.getElementById('pausar-tempo').onclick = function(ev) {
				if(this.innerHTML === "Stop time") {
					physFramework.timeInterval = 0;
					this.innerHTML = "Restart time";
				} else {
					physFramework.timeInterval = 0.05;
					this.innerHTML = "Stop time";
				}
			}
			
			// SUN
			physFramework.addObject(
				0.05,
				1,
				{x: 0, y: 0, z: 0},
				{x: 0, y: 0, z: 0},
				0xFFFF00
			);
			
			
			
		</script>
	</body>
</html>