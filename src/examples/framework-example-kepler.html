<html>
	<head>
		<title>Framework with Kepler Parameters example</title>

		<script src="../core/PhysTrace.js"></script>
		<script src="../core/PhysElement.js"></script>
		<script src="../core/PhysFramework.js"></script>
		
		<script src="../js/jquery.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>

        <script src="../js/three.min.js"></script>
		<script src="../js/stats.min.js"></script>
		<script src="../js/OrbitControls.js"></script>

		<script src="../lib/on-daed-js/geral.js"></script>
        <script src="../lib/on-daed-js/vsop87.min.js"></script>
        <script src="../lib/on-daed-js/astro.js"></script>
 
        <script src="../lib/on-daed-js/ThreeHelper.js"></script>
        <script src="../lib/on-daed-js/MathHelper.js"></script>
        <script src="../lib/on-daed-js/3D.js"></script>
		
        <link href="../css/bootstrap.min.css" rel="stylesheet"/>
        <link href="../css/bootstrap-responsive.css" rel="stylesheet"/>
		
		<style>
			#info-box {
				position: absolute;
				left: 1%;
				bottom: 1%;
				width: 200px;
				height: 220px;
				background: #ffffff;
				padding: 5px;
			}
			
			#pausar-tempo:hover, #speed-icr:hover {
				cursor: pointer;
			}
			
			#pausar-tempo, #speed-icr {
				font-weight: bold;
				font-color: #0000FF;
			}
		</style>
		
	</head>
	<body>
	
		<div id="info-box">
			<div id="pausar-tempo">Restart time</div>
			<div id="speed-icr">0.05</div>
		
			<div id="info-distancia"></div>
			<div id="info-tempo"></div>
			<div id="posicao-sol"></div>
		</div>
	
		<script>
            
			var physFramework = new PhysFramework(
				'../imgs/particleTexture.png',
				1,
				{x: 0, y: 0, z: -4}
			);

			var radius = 2.5;
			var r = 9;
			var speed = 200;
			var EARTH_MASS = 0.000003003;
			
			// EARTH
			var earth = physFramework.addObjectFromKepler2(
				EARTH_MASS,
				0.01,
				0x0077FF,
				1.00000261,
				0.01671123,
				-0.00001531,
				100.46457166,
				102.93768193,
				0
			);
			
			physFramework.addTracingLine(earth, 350);
			
			// VENUS
			var venus = physFramework.addObjectFromKepler2(
				EARTH_MASS * 0.815,
				0.01,
				0xFFa500,
				0.72333566,
				0.00677672,
				3.39467605,
				181.97909950,
				131.60246718,
				76.67984255
			);
			
			physFramework.addTracingLine(venus, 200);
			
			// MERCURY
			var mercury = physFramework.addObjectFromKepler2(
				EARTH_MASS * 0.055,
				0.005,
				0xd3d3d3,
				0.38709927,
				0.20563593,
				7.00497902,
				252.25032350,
				77.45779628,
				48.33076593
			);
			
			physFramework.addTracingLine(mercury, 120);
			
			// MARS
			var mars = physFramework.addObjectFromKepler2(
				EARTH_MASS * 0.107,
				0.0075,
				0xFF0000,
				1.52371034,
				0.09339410,
				1.84969142,
				-4.55343205,
				-23.94362959,
				49.55953891
			);
			
			physFramework.addTracingLine(mars, 600);
			
			// JUPITER
			var jupiter = physFramework.addObjectFromKepler2(
				EARTH_MASS * 317.8,
				0.5,
				0xFFA500,
				5.20288700,
				0.04838624,
				1.30439695,
				34.39644051,
				14.72847983,
				100.47390909
			);
			
			physFramework.addTracingLine(jupiter, 500);
			
			var saturn = physFramework.addObjectFromKepler2(
				EARTH_MASS * 95.16,
				0.275,
				0xC5FF77,
				9.53667594,
				0.05386179,
				2.48599187,
				49.95424423,
				92.59887831,
				113.66242448
			);

			physFramework.addTracingLine(saturn, 600);

			var uranus = physFramework.addObjectFromKepler2(
				EARTH_MASS * 14.54,
				0.35,
				0xCCCCFF,
				19.18916464,
				0.04725744,
				0.77263783,
				313.23810451,
				170.95427630,
				74.01692503
			);
			
			physFramework.addTracingLine(uranus, 700);

			var neptune = physFramework.addObjectFromKepler2(
				EARTH_MASS * 17.15,
				0.35,
				0x0077FF,
				30.06992276,
				0.00859048,
				1.77004347,
				-55.12002969,
				44.96476227,
				131.78422574
			);
			
			physFramework.addTracingLine(neptune, 800);

			// SUN
			var sun = physFramework.addObject(
				0.1,
				1,
				{x: 0, y: 0, z: 0},
				{x: 0, y: 0, z: 0},
				0xFFFF00
			);
			
			window.onload = function () {
			
				window.setInterval(function() {
					
					var e = document.getElementById('info-distancia');
					e.innerHTML = "<b>earth data</b><br />d(sun) = " + (earth.position.clone().sub(sun.position).length() * 149597870).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " km";
					
					e = document.getElementById('posicao-sol');
					e.innerHTML = "<b>sun position</b><br /> x: " +
						sun.physElement._position.x.toFixed(15) + "<br />y: " + 
						sun.physElement._position.y.toFixed(15) + "<br />z: " + 
						sun.physElement._position.z.toFixed(15);
						
					e = document.getElementById('info-tempo');
					e.innerHTML = "t = " + physFramework._accTime.toFixed(2) + " dias / " + (physFramework._accTime / 365.25).toFixed(2) + " anos";
					
				}, 20);
				
				document.getElementById('pausar-tempo').onclick = function(ev) {
					if(this.innerHTML === "Stop time") {
						physFramework.timeInterval = 0;
						this.innerHTML = "Restart time";
					} else {
						physFramework.timeInterval = parseFloat(document.getElementById('speed-icr').innerHTML);
						this.innerHTML = "Stop time";
					}
				}
				
				document.getElementById('speed-icr').onclick = function(ev) {
					if(this.innerHTML === "0.05") {
						this.innerHTML = "1";
					} else {
						this.innerHTML = "0.05";
					}
				}
				
				window.setTimeout(function() {
					StartTracingLines();
				}, 500);
			
			};
			
		</script>
	</body>
</html>